# Вы можете расположить сценарий своей игры в этом файле.

# Определение персонажей игры.

# Вместо использования оператора image можете просто
# складывать все ваши файлы изображений в папку images.
# Например, сцену bg room можно вызвать файлом "bg room.png",
# а eileen happy — "eileen happy.webp", и тогда они появятся в игре.

# Игра начинается здесь:
# Определение персонажей
# Определение персонажей
define a = Character("Артем", color="#c8ffc8")
define m = Character("Макс", color="#c8c8ff")
define i = Character("Я", color="#428d92")
define d = Character("Доктор", color="#ff6666")
define unknown = Character("???", color="#cccccc")

# Инициализация переменной для отслеживания пути
default escape_route = []

label start:

    scene bg forest night with fade

    "Солнечный летний день сменился прохладным вечером, когда мы втроем — я, Артем и Макс — добрались до нужной поляны."
    "Мы быстро разбили лагерь, разожгли костер, и запах дыма смешался с ароматом хвои."

    scene bg campfire with dissolve

    "Прошел час. Усталые после дороги, мы лежали у огня, глядя на звезды."

    a "А давайте страшилки расскажем?"

    m "Отличная идея!"

    "Я был не в восторге, но протестовать не стал. Макс и Артем рассказали по паре классических историй."

    a "А я вот слышал одну местную... Говорят, была в этих лесах одна больница. Очень давно."
    a "И всё было бы хорошо, если бы один доктор не смог спасти одного человека. Простого парня, попавшего в аварию."
    a "Ошибка, секундное промедление… и всё. Его стала преследовать совесть."
    a "День и ночь он видел лицо того парня. И тогда... тогда он сошел с ума."
    a "Говорят, он не ушел, а остался в тех руинах, что прячутся в чаще... Все еще пытаясь 'исправить' свою ошибку."

    "Воцарилась неловкая тишина. История была банальной, но манера рассказа Артема заставила меня поежиться."

    i "Ну вы и весельчаки... Ладно, я спать."

    scene bg tent inside with fade

    "Мы залезли в палатку. Спалось тревожно, подвывание ветра и шорохи листьев казались зловещими после рассказов."


    "Я проснулся от резкого звука — металлического звука, будто уронили пустой баллон."
    "Цифры на часах светились красным: 3:00."
    "Я повернулся и похолодел. Спальное место Артема было пусто."

    i "Макс! Проснись! Артема нет!"

    scene bg tent inside panicked with vpunch

    m "Что? Что случилось?... Артем?"

    "Макс, с трудом вынырнув из сна, увидел пустую постель, и его глаза расширились от ужаса."

    scene bg forest night dark with fade

    "Мы быстро оделись и, взяв фонари, вылезли из палатки. Лес встретил нас гробовой тишиной."

    i "Артем!"

    "Ответа не было. Только эхо."

    "Мы пошли наугад, лучи фонарей выхватывали из тьмы корявые стволы и колючие ветки."

    show bg hospital ruins at truecenter with dissolve

    "И вот, впереди, среди зарослей, я заметил что-то неестественное. Мы подошли ближе и замерли."
    "Из чащи торчали обломки стен, почерневшие от времени и покрытые мхом. Разрушенная больница."

    m "Нет уж, туда я не пойду."

    "Я был с ним полностью согласен."


    unknown "АААААРТЕЕЕМ!"

    "Это был крик Артема. Полный чистого ужаса."

    m "Черт! Бежим!"

    scene bg hospital corridor with fade

    "Мы вломились в здание. Воздух был спертым и пахнет пылью, гнилью и... да, знакомым запахом медицинского спирта."
    "Наш путь освещали только дрожащие лучи фонарей."

    "Мы шли по длинному коридору. В боковых палатах мелькали жуткие видения: пятна, похожие на кровь, и темные силуэты, лежащие на сломанных койках."
    "Было трудно понять, реальность это или игра света и тени."


    "Внезапно из глубины здания донесся истерический, безумный смех. Он эхом раскатился по коридорам."

    m "Что за черт... Я боюсь."

    i "Держись... Мы должны найти его."

    "Смех стих. Мы с Максом, дрожа от страха, двинулись на звук."

    scene bg hospital operating room with fade

    "Мы подошли к последней двери в конце коридора и заглянули внутрь."

    show artem strapped:
        xalign 0.5 yalign 1.0
    with dissolve

    "Артем лежал на ржавой больничной койке, скованный толстыми кожаными ремнями. Он не мог двигаться."
    "Но самое ужасное был его рот. Он был грубо зашит толстыми черными нитками."
    "Увидев нас, он замычал, и в его глазах читалась невыносимая боль и мольба."

    m "Боже... Артем!"

    hide artem strapped

    "Вдруг позади нас скрипнула половица. Мы обернулись."
    "В дверном проеме стоял Он. Высокий, тощий, в окровавленном халате. Его лицо было скрыто в тени, но мы чувствовали его взгляд."
    "В одной руке он сжимал огромный хирургический пинцет."

    d "...Новые... пациенты... Пришли на консультацию?.."

    "Его голос был скрипучим шепотом, полным безумия. Он смотрел на нас так, будто хотел вырезать нам глаза."

    i "(Мысленно) Лабиринт... как мы шли сюда... Направо, прямо, снова направо, налево... и на выход."

    $ escape_route = ["right", "forward", "right", "left", "exit"]

    menu:
        "Броситься к Артему":
            jump save_artem
        "Попытаться отвлечь доктора и бежать":
            jump distract_doctor

label save_artem:

    i "Мы не можем его бросить!"

    "Макс, не раздумывая, бросился вперед. Доктор занес пинцет, но Макс оказался проворнее."

    show max attack with vpunch

    m "Держи, урод!"

    "Макс выхватил пинцет из руки ошеломленного доктора и со всей силы ткнул ему в бок."

    show doctor scary:
        linear 0.5 zoom 1.2
        linear 0.5 zoom 1.0
    with vpunch


    "Доктор с оглушительным воплем рухнул на пол, корчась от боли."

    hide doctor scary with dissolve

    "Я тем временем подбежал к Артему и начал лихорадочно расстегивать ремни."

    i "Держись, Артем! Сейчас выберемся!"

    "Последний ремень отстегнулся. Я подхватил Артема, который еле стоял на ногах, и мы с Максом бросились бежать."

    jump escape

label distract_doctor:

    i "Эй, урод! Иди сюда!"

    "Я крикнул и бросился в противоположный от Артема угол. Доктор, рыча, повернулся ко мне."

    show doctor scary:
        linear 1.0 xalign 0.2
    with dissolve

    "Этого момента хватило Максу. Пока доктор был ко мне спиной, Макс подкрался и выхватил пинцет."

    show max attack with vpunch

    m "Получай!"

    "Он ткнул пинцетом в спину безумца."

    show doctor scary:
        linear 0.5 zoom 1.2
        linear 0.5 zoom 1.0
    with vpunch
    play sound "sfx_fall.ogg"

    "Доктор с воплем упал. Я кивком показал Максу на Артема, и пока он освобождал друга, я прикрывал отход."

    jump escape

label escape:

    scene bg hospital corridor with fade

    i "За мной! Помню дорогу!"

    "Мы понеслись по темным коридорам, как угорелые."

    i "Направо!"
    scene bg hospital corridor2 with dissolve
    i "Прямо!"
    scene bg hospital corridor3 with dissolve
    i "Снова направо!"
    scene bg hospital corridor4 with dissolve
    i "Налево!"

    scene bg forest night with fade

    "И, наконец, мы вывалились через выбитую дверь обратно в холодный ночной лес."
    "Не останавливаясь и не оглядываясь, мы бежали к нашей палатке."

    scene bg campfire dawn with fade

    "Мы сидели у догорающего костра, уже на рассвете. Артем, с распухшими губами, молча куталcя в спальник."
    "Мы собрали все свои вещи за две минуты."

    m "Больше... Больше я сюда ни ногой."

    i "Я тоже."

    "Мы сели в машину и уехали. Никогда больше не возвращались в тот лес."
    "И историю про доктора из заброшенной больницы мы больше никогда не рассказывали."

    scene black with fade
    "Конец."

    return